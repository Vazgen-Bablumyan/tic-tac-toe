<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>simple tic-tac-toe game</title>
</head>

<body>

    <script>





        let stringifyBoard = function (board) {
            return board[0].join("   ") +
                "\n" +
                board[1].join("   ") +
                "\n" +
                board[2].join("   ");
        }

        debugger
        let playerOne = prompt('What players do you want to start the game ? x or o ?', 'x');
        
        let firstPlayer = function () {
            if (playerOne === 'x' || playerOne === 'o') {
                return playerOne
            } else {

                playerOne = prompt("Please enter x or o", "x")

            }
            return firstPlayer()
        }

        let didWeWin = function (board, player) {

            // check rows
            if (board[0][0] === player && board[0][1] === player && board[0][2] === player) {
                return true;
            }

            if (board[1][0] === player && board[1][1] === player && board[1][2] === player) {
                return true;
            }
            if (board[2][0] === player && board[2][1] === player && board[2][2] === player) {
                return true;
            }

            // check columns
            if (board[0][0] === player && board[1][0] === player && board[2][0] === player) {
                return true;
            }

            if (board[0][1] === player && board[1][1] === player && board[2][1] === player) {
                return true;
            }
            if (board[0][2] === player && board[1][2] === player && board[2][2] === player) {
                return true;
            }

            // check diagonal
            if (board[0][0] === player && board[1][1] === player && board[2][2] === player) {
                return true;
            }
            if (board[0][2] === player && board[1][1] === player && board[2][0] === player) {
                return true;
            }
            return false
        }

        let isFull = function (board) {
            let i = 0;
            while (i < board.length) {
                const row = board[i]

                let i2 = 0;
                while (i2 < row.length) {
                    if (row[i2] === "-") {
                        return false;
                    }
                    i2 = i2 + 1;
                }
                i = i + 1;
            }
            return true;
        };



        let board = [
            ["-", "-", "-"],
            ["-", "-", "-"],
            ["-", "-", "-"],
        ];

        let player = firstPlayer()
        while (true) {
            let boardStr = stringifyBoard(board)

            let row = +prompt(
                "Dear user, please provide the value for the row \n\n" + boardStr);
            let column = +prompt(
                "Dear user, please provide the value for the column \n\n" + boardStr);

            if (board[row][column] !== "-") {
                alert("Not a legal move, you lose!");
                break;
            }

            board[row][column] = player;

            const won = didWeWin(board, player);

            if (won) {
                alert("Player " + player + " won the game!");
                break;
            }

            if (isFull(board)) {
                alert("The board if full, nobody won")
                break;
            }
            if (player === "x") {
                player = "o";
            } else {
                player = "x";
            }
        }

    </script>
</body>

</html>